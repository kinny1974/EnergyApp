### **Presentaci√≥n para Desarrolladores: Onboarding al Proyecto "An√°lisis Inteligente de la Demanda"**

**Diapositiva 1: T√≠tulo**
*   **T√≠tulo:** Onboarding de Desarrolladores
*   **Proyecto:** An√°lisis Inteligente de la Demanda ‚ö°ü§ñ
*   **Objetivo:** Gu√≠a de inicio r√°pido para entender la arquitectura, el stack tecnol√≥gico y las convenciones del proyecto.

**Diapositiva 2: Visi√≥n del Producto**
*   **T√≠tulo:** ¬øQu√© estamos construyendo?
*   **Descripci√≥n:** Una aplicaci√≥n web para la gesti√≥n y an√°lisis inteligente de consumo energ√©tico.
*   **N√∫cleo del Negocio:** Comparamos curvas de carga reales contra comportamientos hist√≥ricos usando IA (Google Gemini) para detectar anomal√≠as y cambios de h√°bitos autom√°ticamente, generando valor a trav√©s del ahorro y el mantenimiento predictivo.

**Diapositiva 3: Arquitectura del Sistema (N-Tier)**
*   **T√≠tulo:** Vista de 10,000 pies
*   **Diagrama:**
    *   Caja 1 (Izquierda): **Frontend (Capa de Presentaci√≥n)** - `React, Vite, TypeScript` - Responsable de la interacci√≥n con el usuario y la visualizaci√≥n de datos.
    *   Flecha: `(API Request)`
    *   Caja 2 (Centro): **Backend (Capa de Negocio)** - `FastAPI, Python` - Orquesta la l√≥gica de negocio, el an√°lisis de datos y la comunicaci√≥n con servicios externos (IA) y la base de datos.
    *   Flecha: `(SQL Query)`
    *   Caja 3 (Derecha): **Database (Capa de Datos)** - `PostgreSQL` - Almacenamiento persistente de las lecturas de consumo.
*   **Principio Clave:** Separaci√≥n de responsabilidades. El frontend no sabe de l√≥gica de negocio, el backend no sabe de renderizado.

**Diapositiva 4: Tech Stack - Backend**
*   **T√≠tulo:** El Cerebro: Python + FastAPI
*   **Framework:** **FastAPI** - Un microframework moderno y as√≠ncrono. Ideal para APIs de alto rendimiento.
*   **Librer√≠as Clave:**
    *   `SQLAlchemy`: Nuestro ORM. Abstrae la comunicaci√≥n con PostgreSQL. Ver `backend/app/data/database.py`.
    *   `pandas`: Fundamental para la manipulaci√≥n de datos, especialmente en la carga de CSV y el procesamiento de series temporales en `energy_service`.
    *   `google-generativeai`: El cliente para interactuar con la API de Gemini. Ver `backend/app/services/chat_service.py`.
    *   `pydantic`: Usado por FastAPI para la validaci√≥n de datos en los endpoints y la gesti√≥n de la configuraci√≥n (`core/config.py`).
*   **Base de Datos:** **PostgreSQL**. La tabla principal es `m_lecturas`. El modelo est√° en `app/data/models.py`.

**Diapositiva 5: Tech Stack - Frontend**
*   **T√≠tulo:** La Cara Visible: React + TypeScript
*   **Librer√≠a/Framework:** **React** con **Vite** como empaquetador y servidor de desarrollo. Vite ofrece HMR (Hot Module Replacement) ultra-r√°pido.
*   **Lenguaje:** **TypeScript** - Usamos tipado est√°tico para un c√≥digo m√°s robusto y mantenible.
*   **Librer√≠as Clave:**
    *   `recharts`: Para las gr√°ficas interactivas del dashboard (`EnergyDashboard.tsx`).
    *   `tailwindcss`: Framework CSS utility-first para un dise√±o r√°pido y consistente.
    *   `lucide-react`: Paquete de iconos.
    *   `axios` (o `fetch` nativo): Para las llamadas a la API del backend, gestionado en `frontend/src/services/api.ts`.

**Diapositiva 6: Explorando el C√≥digo: Estructura del Backend**
*   **T√≠tulo:** ¬øD√≥nde est√° qu√©? (Backend)
*   **Directorio Ra√≠z:** `/backend/app/`
    *   `main.py`: Punto de entrada de la aplicaci√≥n. Monta los routers y la configuraci√≥n inicial de FastAPI.
    *   `api/endpoints.py`: Define todos los endpoints de la API (`/load_data`, `/analyze`, etc.). La puerta de entrada a la l√≥gica de negocio.
    *   `services/`: Contiene la l√≥gica de negocio principal.
        *   `energy_service.py`: L√≥gica para procesar, comparar y analizar las curvas de energ√≠a.
        *   `chat_service.py`: Abstrae la comunicaci√≥n con la API de Gemini.
    *   `data/`: Todo lo relacionado con la persistencia.
        *   `database.py`: Configuraci√≥n de la sesi√≥n de SQLAlchemy.
        *   `models.py`: Define la estructura de las tablas de la base de datos.
        *   `repositories.py`: Implementa el patr√≥n Repositorio para un acceso a datos m√°s limpio.

**Diapositiva 7: Explorando el C√≥digo: Estructura del Frontend**
*   **T√≠tulo:** ¬øD√≥nde est√° qu√©? (Frontend)
*   **Directorio Ra√≠z:** `/frontend/src/`
    *   `main.tsx`: Punto de entrada de React. Renderiza el componente principal `App`.
    *   `App.tsx`: Componente ra√≠z que contiene la estructura principal de la UI, incluyendo el dashboard.
    *   `components/`: Componentes reutilizables.
        *   `EnergyDashboard.tsx`: El panel principal con los controles y la gr√°fica.
        *   `EnergyChatbot.tsx`: El √°rea que muestra los resultados del an√°lisis de la IA.
    *   `services/api.ts`: Centraliza la l√≥gica de comunicaci√≥n con el backend. Todas las llamadas `fetch` o `axios` deben ir aqu√≠.

**Diapositiva 8: Patr√≥n de Dise√±o Clave: Observer**
*   **T√≠tulo:** The Observer Pattern
*   **Prop√≥sito:** Desacoplar acciones secundarias de la l√≥gica principal. Lo usamos para auditor√≠a y un sistema de notificaciones flexible.
*   **Implementaci√≥n:**
    *   `services/energy_service.py` act√∫a como el "Subject". Cuando ocurre un evento importante (ej. "an√°lisis cr√≠tico"), notifica a sus observadores.
    *   `services/observers.py` contiene los "Observers" (ej. `LoggingObserver`, `CriticalAlertObserver`).
*   **¬øC√≥mo extenderlo?:** Para a√±adir una nueva acci√≥n (ej. enviar un email en caso de alerta), solo tienes que crear un nuevo observador en `observers.py` e instanciarlo donde se crea el `EnergyService`.

**Diapositiva 9: Configuraci√≥n del Entorno Local**
*   **T√≠tulo:** Manos a la obra: Tu entorno de desarrollo
*   **Requisitos Previos:** `Python 3.10+`, `Node.js 20+`, `PostgreSQL` (corriendo en `localhost:54321`).
*   **Backend (Terminal 1):**
    1. `cd backend`
    2. `python -m venv .venv`
    3. `source .venv/bin/activate` (o `.\.venv\Scripts\activate` en Win)
    4. `pip install -r requirements.txt`
    5. Crea `.env` a partir de `.env.example` y rellena `DATABASE_URL`.
    6. `python -m app.main`
*   **Frontend (Terminal 2):**
    1. `cd frontend`
    2. `npm install`
    3. `npm run dev`
*   **Acceso:** Abre tu navegador en `http://localhost:3000`.

**Diapositiva 10: Flujo de Trabajo y Git**
*   **T√≠tulo:** C√≥mo contribuimos
*   **Ramas (Branches):**
    *   `main`: Rama principal. Siempre debe estar estable y desplegable.
    *   `develop`: Rama de integraci√≥n. Aqu√≠ se mezclan las nuevas caracter√≠sticas.
    *   Crea tus ramas a partir de `develop`:
        *   `feature/<nombre-feature>` (ej. `feature/export-to-pdf`)
        *   `bugfix/<nombre-bug>` (ej. `bugfix/fix-chart-tooltip`)
*   **Commits:** Usa mensajes de commit convencionales (ej. `feat: Add user authentication endpoint`, `fix: Correct tax calculation`).
*   **Tests:** Revisa los tests existentes en `backend/test_*.py`. A√±ade tests para cada nueva funcionalidad o bug corregido.
*   **Pull Requests (PRs):** Env√≠a los PRs contra la rama `develop` para su revisi√≥n.

**Diapositiva 11: Recursos y Pr√≥ximos Pasos**
*   **T√≠tulo:** Documentaci√≥n y Ayuda
*   **Tu primera tarea:**
    *   **Sugerencia 1:** Familiar√≠zate con el flujo de datos. Usa el debugger para seguir una llamada desde `EnergyDashboard.tsx` hasta `energy_service.py` y de vuelta.
    *   **Sugerencia 2:** Elige un test de `test_anomalies.py`, enti√©ndelo y ejec√∫talo.
    *   **Sugerencia 3:** Revisa los `TODO:` en el c√≥digo para encontrar tareas peque√±as pendientes.
*   **Enlaces √ötiles:**
    *   [Documentaci√≥n de FastAPI](https://fastapi.tiangolo.com/)
    *   [Documentaci√≥n de React](https://react.dev/)
    *   [Documentaci√≥n de SQLAlchemy](https://www.sqlalchemy.org/)
    *   [Google AI Studio](https://aistudio.google.com/)